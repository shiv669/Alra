(()=>{"use strict";!function(){if(console.log("üåâ ALRA AI Bridge: Injected into page context"),console.log("üîç window.ai available:","ai"in window),!("ai"in window))return void console.log("‚ö†Ô∏è ALRA AI Bridge: window.ai not available on this page");const e=window.ai;console.log("‚úÖ ALRA AI Bridge: window.ai found! Initializing..."),window.addEventListener("ALRA_AI_REQUEST",async i=>{const{action:t,data:a,requestId:o}=i.detail;console.log(`üì® ALRA AI Bridge: Received request ${t}`);try{let i=null;if("SUMMARIZE"===t){const t=await e.summarizer.create({type:"key-points",format:"markdown",length:"medium"});i=await t.summarize(a.text),console.log("‚úÖ ALRA AI Bridge: Summarization complete")}else if("GENERATE_TEXT"===t){const t=await e.languageModel.create();i=await t.prompt(a.prompt),console.log("‚úÖ ALRA AI Bridge: Text generation complete")}else if("WRITE"===t)if("writer"in e){const t=await e.writer.create({tone:a.tone||"casual",length:a.length||"short"});i=await t.write(a.prompt),console.log("‚úÖ ALRA AI Bridge: Writing complete")}else{const t=await e.languageModel.create();i=await t.prompt(a.prompt),console.log("‚úÖ ALRA AI Bridge: Writing complete (via language model)")}else if("REWRITE"===t){const t=await e.rewriter.create();i=await t.rewrite(a.text),console.log("‚úÖ ALRA AI Bridge: Rewriting complete")}else if("CHECK_CAPABILITIES"===t){const t={};if("summarizer"in e)try{const i=await e.summarizer.capabilities();t.summarizer=i.available}catch(e){t.summarizer="no"}if("languageModel"in e)try{const i=await e.languageModel.capabilities();t.languageModel=i.available}catch(e){t.languageModel="no"}if("writer"in e)try{const i=await e.writer.capabilities();t.writer=i.available}catch(e){t.writer="no"}if("rewriter"in e)try{const i=await e.rewriter.capabilities();t.rewriter=i.available}catch(e){t.rewriter="no"}i=t,console.log("‚úÖ ALRA AI Bridge: Capabilities checked",t)}window.dispatchEvent(new CustomEvent("ALRA_AI_RESPONSE",{detail:{requestId:o,success:!0,result:i}}))}catch(e){console.error("‚ùå ALRA AI Bridge: Error processing request",e),window.dispatchEvent(new CustomEvent("ALRA_AI_RESPONSE",{detail:{requestId:o,success:!1,error:String(e)}}))}}),window.dispatchEvent(new CustomEvent("ALRA_AI_BRIDGE_READY")),console.log("‚úÖ ALRA AI Bridge: Ready and listening for requests")}()})();